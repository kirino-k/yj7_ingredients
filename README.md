# 医療用医薬品の YJ7 コードと成分名の対応表

2020-07-27

## はじめに

日本の医療用医薬品は、薬効分類ごとに分類されている。<br>

ここでいう「薬効」とは、下記リンクにおける日本標準商品分類番号の中分類 87 の分類が該当する。<br>
https://www.soumu.go.jp/toukei_toukatsu/index/seido/syouhin/2index.htm

種々の医薬品標準マスターを取り扱う際に使用される YJ コードや薬価基準収載医薬品コードの上位 1 ~ 4 桁はこの分類番号と対応している。

分類番号と分類名の対応表が存在すると大変ありがたいのだが、扱いやすい形式 (エクセルファイルやプレーンテキストファイル等) で格納・配布をしてくれている WEB サイトは残念ながら存在しない。

そこで、以下のデータベースサイトの情報を取得・加工することで、薬効分類番号と分類名称の対応が記載された CSV ファイルを作成して、本リポジトリに格納することとする。<br>
[KEGG: Kyoto Encyclopedia of Genes and Genomes](https://www.kegg.jp/kegg/)


## このリポジトリが提供するもの

本リポジトリでは、以下の 2 つが取得可能である。

1. 薬効分類番号 (薬効分類コード) と分類名の対応表 

2. 1 を作成するために必要な環境構築方法と実行スクリプトのソースコード

現在の薬効分類番号と分類名の対応表が必要な場合には、本リポジトリの[成果物ページ](https://github.com/kirino-k/yj7_ingredients/blob/main/src/out/output.csv)をコピー＆ペースト可能である。

また分類の改定などといった、情報の再取得・再加工が必要な状況も想定されるため、対応表作成の手順を以下に示すとともに、対応表作成に用いたソースコードとその実行環境の情報を併せて提供する。


## 対応表の作成方法等

### 情報源

2008年3月7日掲載
平成２０年度診療報酬における後発医薬品について
https://www.mhlw.go.jp/topics/2008/03/tp0307-2.html

2009年11月13日更新
新たに収載された診療報酬における後発医薬品
https://www.mhlw.go.jp/topics/2008/06/tp0620-1.html

2010年3月5日更新
平成２２年度　診療報酬において加算等の算定対象となる後発医薬品について
https://www.mhlw.go.jp/topics/2010/03/tp0305-1.html

2010年11月19日更新
2011年1月28日更新
2012年1月16日更新
診療報酬において加算等の算定対象となる後発医薬品（新規収載分）
https://www.mhlw.go.jp/topics/2010/04/tp0423-1.html

2012年4月2日掲載
2012年6月22日掲載
2012年7月30日更新
2012年9月18日更新
2012年12月14日更新
2013年3月21日更新
2013年4月1日更新
2013年5月1日更新
2013年6月21日更新
2013年7月1日掲載
2013年8月1日更新
平成２４，２５年度　診療報酬において加算等の算定対象となる後発医薬品(新規収載分)
https://www.mhlw.go.jp/topics/2012/04/tp0402-1.html

2015年10月1日更新
2015年11月26日更新
2015年11月30日更新
2015年12月11日更新
2016年3月4日掲載
薬価基準収載品目リスト及び後発医薬品に関する情報について（平成28年3月31日まで）
https://www.mhlw.go.jp/topics/2014/03/tp0305-01.html

2016年3月4日掲載
2016年4月20日更新
2016年5月25日更新
2016年6月17日更新
2016年6月29日更新
2016年8月31日更新
2016年9月15日更新
2016年11月18日更新
2016年12月7日更新
2016年12月9日更新
2016年12月21日更新
2017年2月1日更新
2017年2月15日更新
2017年3月17日更新
2017年5月24日掲載
2017年5月31日掲載
2017年6月16日掲載
2017年8月30日掲載
2017年10月2日掲載
2017年11月22日掲載
2017年11月29日掲載
2017年12月8日掲載
2018年3月5日掲載
2018年3月14日掲載
薬価基準収載品目リスト及び後発医薬品に関する情報について（平成30年3月31日まで）
https://www.mhlw.go.jp/topics/2016/04/tp20160401-01.html

2018年3月5日掲載
2018年3月14日掲載
2018年4月18日掲載
2018年5月22日掲載
2018年5月30日掲載
2018年6月15日掲載
2018年7月2日掲載
2018年8月29日掲載
2018年11月1日掲載
2018年11月20日掲載
2018年11月28日掲載
2018年12月12日掲載
2018年12月14日掲載
2019年2月1日掲載
2019年2月26日掲載
2019年3月15日掲載
2019年4月3日掲載
2019年8月19日掲載
薬価基準収載品目リスト及び後発医薬品に関する情報について（令和元年9月30日まで）
https://www.mhlw.go.jp/topics/2018/04/tp20180401-01.html

2020年3月5日掲載
薬価基準収載品目リスト及び後発医薬品に関する情報について（令和2年3月31日まで）
https://www.mhlw.go.jp/topics/2020/04/tp20200401-01.html

2021年3月5日掲載
薬価基準収載品目リスト及び後発医薬品に関する情報について（令和4年3月31日まで）
https://www.mhlw.go.jp/topics/2021/04/tp20210401-01.html

掲載日不明
薬価基準収載品目リスト及び後発医薬品に関する情報について（令和4年7月1日適用）
https://www.mhlw.go.jp/topics/2022/04/tp20220401-01.html


### 環境

ソースコードを実行するためには以下の環境が必須である。

- Linux shell (bash)
    - wget, paste, sed, nkf

- Python

Docker (特に[Play with Docker](https://labs.play-with-docker.com/)) を用いることで、ローカル環境における環境構築は不要である。

### 手順


1. Windows PC 上の MS Excel で文字化けせずに表示可能な CSV ファイル (src/out/therapeutic_category_of_drug_{yyyymmdd}.csv) を出力する。


## ファイルレイアウト


| 列名              | 説明                                              |
|-------------------|---------------------------------------------------|
|YJ7コード          | 「薬効分類コード」の上位 **1 桁**の数字           |
|成分名             | 「分類番号1」に対応する分類名                     |

## ソースコードの実行方法


### リポジトリの clone

GitHub より リポジトリを clone する

```
git clone https://github.com/kirino-k/yj7_ingredients.git
```

### ローカルに実行環境がある場合

ローカルの shell でスクリプトを実行 (リポジトリの root ディレクトリ)

```
./src/create_table.sh
```

### Docker コンテナ上でスクリプトを実行する場合

Docker コンテナの作成

```
docker build . -t yj7_ingredients:latest
```

Docker コンテナ上でスクリプトを実行 (リポジトリの root ディレクトリ)

```
docker run \
  --rm \
  -v $(pwd)/src:/home/docker/src \
  --user docker \
  --workdir /home/docker/src \
  yj7_ingredients:latest \
  ./create_table.sh    
```

コンテナ削除

```
docker rmi yj7_ingredients:latest
```
